#!/usr/bin/env node
import { spawnSync } from 'node:child_process';
import process from 'node:process';

const ROOT = process.cwd();
const node = process.execPath;

const steps = [
  { label: 'conflict markers', args: ['scripts/check-conflicts.mjs'] },
  { label: 'relative imports', args: ['scripts/check-relative-imports.mjs'] },
];

for (const step of steps) {
  const res = spawnSync(node, step.args, { stdio: 'inherit', cwd: ROOT });
  if (res.status !== 0) {
    process.exit(res.status ?? 1);
  }
}
